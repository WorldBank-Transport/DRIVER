description "driver-app"

start on filesystem and started docker
stop on stopping docker

kill timeout 20
kill signal CONT
respawn

pre-start script
  /usr/bin/docker kill driver-app || true
  /usr/bin/docker rm driver-app || true
end script

script
  /usr/bin/docker run \
    --name driver-app \
    --publish 4000:4000 \
    {% for k,v in envdir_conf.items() -%}
    --env {{ k }}={{ v }} \
    {% endfor -%}
    --log-driver syslog \
    driver/app:latest
end script

post-stop script
  /usr/bin/docker kill driver-app
  /usr/bin/docker rm driver-app
end script
